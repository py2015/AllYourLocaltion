<!DOCTYPE HTML>
<!--
	Strata by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>All About You Location</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
		<script src="js/jquery.min.js"></script>
		<script src="js/jquery.poptrox.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/init.js"></script>	
		<script type="text/javascript" src="js/jssor.js"></script>
		<script type="text/javascript" src="js/jssor.slider.js"></script>		
		
		<link rel="stylesheet" type="text/css" href="styles.css" />
		<link rel="stylesheet" type="text/css" href="css/style-weather.css" />
		<link rel="stylesheet" type="text/css" href="css/style-slider.css" />
		<link rel="stylesheet" type="text/css" href="css/style-large-image.css" />
		<link rel="stylesheet" href="css/style-weather-widget.css" />
		
		<noscript>
			<link rel="stylesheet" href="css/skel.css" />
			<link rel="stylesheet" href="css/style.css" />
			<link rel="stylesheet" href="css/style-xlarge.css" />
		</noscript>
		<!--[if lte IE 8]><link rel="stylesheet" href="css/ie/v8.css" /><![endif]-->
	</head>
	<body id="top">
		<script>
			jQuery(document).ready(function ($) {
				//Reference http://www.jssor.com/development/slider-with-slideshow-jquery.html
				//Reference http://www.jssor.com/development/tool-slideshow-transition-viewer.html

				var options = {
					$AutoPlay: true,                                    //[Optional] Whether to auto play, to enable slideshow, this option must be set to true, default value is false
					$AutoPlaySteps: 1,                                  //[Optional] Steps to go for each navigation request (this options applys only when slideshow disabled), the default value is 1
					$AutoPlayInterval: 4000,                            //[Optional] Interval (in milliseconds) to go for next slide since the previous stopped if the slider is auto playing, default value is 3000
					$PauseOnHover: 1,                               //[Optional] Whether to pause when mouse over if a slider is auto playing, 0 no pause, 1 pause for desktop, 2 pause for touch device, 3 pause for desktop and touch device, 4 freeze for desktop, 8 freeze for touch device, 12 freeze for desktop and touch device, default value is 1

					$ArrowKeyNavigation: true,   			            //[Optional] Allows keyboard (arrow key) navigation or not, default value is false
					$SlideDuration: 300,                                //[Optional] Specifies default duration (swipe) for slide in milliseconds, default value is 500
					$MinDragOffsetToSlide: 20,                          //[Optional] Minimum drag offset to trigger slide , default value is 20
					$SlideWidth: 150,                                   //[Optional] Width of every slide in pixels, default value is width of 'slides' container
					$SlideHeight: 85,                                //[Optional] Height of every slide in pixels, default value is height of 'slides' container
					$SlideSpacing: 3, 					                //[Optional] Space between each slide in pixels, default value is 0
					$DisplayPieces: 4,                                  //[Optional] Number of pieces to display (the slideshow would be disabled if the value is set to greater than 1), the default value is 1
					$ParkingPosition: 0,                              //[Optional] The offset position to park slide (this options applys only when slideshow disabled), default value is 0.
					$UISearchMode: 1,                                   //[Optional] The way (0 parellel, 1 recursive, default value is 1) to search UI components (slides container, loading screen, navigator container, arrow navigator container, thumbnail navigator container etc).
					$PlayOrientation: 1,                                //[Optional] Orientation to play slide (for auto play, navigation), 1 horizental, 2 vertical, 5 horizental reverse, 6 vertical reverse, default value is 1
					$DragOrientation: 1,                                //[Optional] Orientation to drag slide, 0 no drag, 1 horizental, 2 vertical, 3 either, default value is 1 (Note that the $DragOrientation should be the same as $PlayOrientation when $DisplayPieces is greater than 1, or parking position is not 0)

					$BulletNavigatorOptions: {                                //[Optional] Options to specify and enable navigator or not
						$Class: $JssorBulletNavigator$,                       //[Required] Class to create navigator instance
						$ChanceToShow: 2,                               //[Required] 0 Never, 1 Mouse Over, 2 Always
						$AutoCenter: 0,                                 //[Optional] Auto center navigator in parent container, 0 None, 1 Horizontal, 2 Vertical, 3 Both, default value is 0
						$Steps: 1,                                      //[Optional] Steps to go for each navigation request, default value is 1
						$Lanes: 1,                                      //[Optional] Specify lanes to arrange items, default value is 1
						$SpacingX: 0,                                   //[Optional] Horizontal space between each item in pixel, default value is 0
						$SpacingY: 0,                                   //[Optional] Vertical space between each item in pixel, default value is 0
						$Orientation: 1                                 //[Optional] The orientation of the navigator, 1 horizontal, 2 vertical, default value is 1
					},

					$ArrowNavigatorOptions: {
						$Class: $JssorArrowNavigator$,              //[Requried] Class to create arrow navigator instance
						$ChanceToShow: 1,                               //[Required] 0 Never, 1 Mouse Over, 2 Always
						$AutoCenter: 2,                                 //[Optional] Auto center navigator in parent container, 0 None, 1 Horizontal, 2 Vertical, 3 Both, default value is 0
						$Steps: 4                                       //[Optional] Steps to go for each navigation request, default value is 1
					}
				};

				var jssor_slider1 = new $JssorSlider$("slider1_container", options);

				//responsive code begin
				//you can remove responsive code if you don't want the slider scales while window resizes
				function ScaleSlider() {
					var bodyWidth = document.body.clientWidth;
					if (bodyWidth)
						jssor_slider1.$ScaleWidth(Math.min(bodyWidth, 809));
					else
						window.setTimeout(ScaleSlider, 30);
				}
				ScaleSlider();

				$(window).bind("load", ScaleSlider);
				$(window).bind("resize", ScaleSlider);
				$(window).bind("orientationchange", ScaleSlider);

				//responsive code end
				$(".loading").hide();
				window.location.href = "#goofy";
			});
		</script>
	
		<!-- Header -->
			<header id="header">
				<script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.1/bootstrap.min.js"></script>
				<script src="js/jquery.simpleWeather.js"></script>

				<div id="weather" class="weather"></div>
				
				
				<h1 id="GeoResults"></h1>
				
				<br/>
				
				<button id="btnIpLocation" class="button active" onclick="getIpLocation();">Địa chỉ IP</button>
				<button id="btnRealLocation" class="button deactive" onclick="getRealLocation();">Địa chỉ thực</button>
			</header>

		<!-- Main -->
			<div id="main" style="position: relative;">
				<!-- One -->
				<section id="one">
					<header class="major">
						<br />
						<h2>Bản Đồ</h2>
					</header>
					<form>
					  <input id="geocomplete" type="text" placeholder="Type in an address" size="90" style="width: 99%;"/>
					</form>
					
					<div class="map_canvas" id="mapcanvas"  style="width: 99%;"></div>
					
					<script src="http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places"></script>
					<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

					<script src="js/jquery.geocomplete.js"></script>
					<script src="logger.js"></script>
					 
					<script>
					  $(function(){
						
						var options = {
						  map: ".map_canvas",
						  location: [lat,lon]
						};
						
						$("#geocomplete").geocomplete(options);
						
					  });
					</script>
				</section>
				
				<section id="two">
					<header class="major">
						<h2>Thời Tiết</h2>
					</header>
					<div class="row">
						
						<script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.1/bootstrap.min.js"></script>
						<script src="js/jquery.simpleWeather.js"></script>
								
						<article class="6u 12u$(xsmall) work-item">
							<section class="section">

								<h1 id="h_wt2"></h1>

								<div class="temperature">
								  <h2 id="c_wt2"></h2>
								</div>

								<ul style="align=center;">
								  <li class="fontawesome-plus left">
									<span id="p_wt2">4 mph</span>
								  </li>
								  <li class="fontawesome-minus right">
									<span id="m_wt2">10%</span>
								  </li>
								</ul> 

							</section>
						</article>
						
						<article class="6u 12u$(xsmall) work-item">
							<section class="section">

								<h1 id="h_wt3"></h1>

								<div class="temperature">
								  <h2 id="c_wt3"></h2>
								</div>

								<ul>
								  <li class="fontawesome-plus left">
									<span id="p_wt3">4 mph</span>
								  </li>
								  <li class="fontawesome-minus right">
									<span id="m_wt3">10%</span>
								  </li>
								</ul> 

							</section>
						</article>
						
						<article class="6u 12u$(xsmall) work-item">
							<section class="section">

								<h1 id="h_wt4"></h1>

								<div class="temperature">
								  <h2 id="c_wt4"></h2>
								</div>

								<ul>
								  <li class="fontawesome-plus left">
									<span id="p_wt4">4 mph</span>
								  </li>
								  <li class="fontawesome-minus right">
									<span id="m_wt4">10%</span>
								  </li>
								</ul>  

							</section>
						</article>
						
						<article class="6u 12u$(xsmall) work-item">
							<section class="section">

								<h1 id="h_wt5"></h1>

								<div class="temperature">
								  <h2 id="c_wt5"></h2>
								</div>

								<ul>
								  <li class="fontawesome-plus left">
									<span id="p_wt5">4 mph</span>
								  </li>
								  <li class="fontawesome-minus right">
									<span id="m_wt5">10%</span>
								  </li>
								</ul> 

							</section>
						</article>
					</div>
				</section>
				
				<section id="three">
					<header class="major">
						<h2>Giá Ngoại Tệ</h2>
					</header>
					<div class="row">
						<iframe frameborder="0" marginwidth="0" marginheight="0" src="http://www.reviewcompany.vn/free-service/exchange/" width="99%" height="350" scrolling="yes"></iframe> 
					</div>
				</section>
				
				<section id="four">
					<header class="major">
						<h2>Giá Vàng</h2>
					</header>
					<div class="row">
						<iframe frameborder="0" marginwidth="0" marginheight="0" src="http://www.reviewcompany.vn/free-service/gold/" width="99%" height="350" scrolling="yes"></iframe> 
					</div>
				</section>
				
				<div id="slider1_container" style="position: fixed; top: 0px; margin: 0 auto; width: 809px; height: 150px; overflow: hidden;">

				<!-- Loading Screen -->
				<div u="loading" style="position: absolute; top: 0px; left: 0px;">
					<div style="filter: alpha(opacity=70); opacity:0.7; position: absolute; display: block;
						background-color: #000; top: 0px; left: 0px;width: 100%;height:100%;">
					</div>
					<div style="position: absolute; display: block; background: url(images/loading.gif) no-repeat center center;
						top: 0px; left: 0px;width: 100%;height:100%;">
					</div>
				</div>
				
				<!-- Slides Container -->
				<div u="slides" style="cursor: move; position: absolute; left: 0px; top: 0px; width: 809px; height: 150px; overflow: hidden;">
						<div>
							<a u=image href="http://click.accesstrade.vn/adv.php?rk=00001g00002r" target="_blank"><img src="http://imp.accesstrade.vn/img.php?rk=00001g00002r" border="0"/></a>
						</div>
						<div>
							<a u=image href="http://click.accesstrade.vn/adv.php?rk=00000j00002r" target="_blank"><img src="http://imp.accesstrade.vn/img.php?rk=00000j00002r" border="0"/></a>
						</div>
						<div>
							<a u=image href="http://click.accesstrade.vn/adv.php?rk=00000n00002r" target="_blank"><img src="http://imp.accesstrade.vn/img.php?rk=00000n00002r" border="0"/></a>
						</div>
						<div>
							<a u=image href="http://click.accesstrade.vn/adv.php?rk=00000w00002r" target="_blank"><img src="http://imp.accesstrade.vn/img.php?rk=00000w00002r" border="0"/></a>
						</div>
						<div>
							<a u=image href="http://click.accesstrade.vn/adv.php?rk=00001000002r" target="_blank"><img src="http://imp.accesstrade.vn/img.php?rk=00001000002r" border="0"/></a>
						</div>
						<div>
							<a u=image href="http://click.accesstrade.vn/adv.php?rk=00005i00002r" target="_blank"><img src="http://imp.accesstrade.vn/img.php?rk=00005i00002r" border="0"/></a>
						</div>
						<div>
							<a u=image href="http://click.accesstrade.vn/adv.php?rk=00003000002r" target="_blank"><img src="http://imp.accesstrade.vn/img.php?rk=00003000002r" border="0"/></a>							 
						</div>
						<div>
							<a u=image href="http://click.accesstrade.vn/adv.php?rk=00003q00002r" target="_blank"><img src="http://imp.accesstrade.vn/img.php?rk=00003q00002r" border="0"/></a>						 
						</div>
						<div>
							<a u=image href="http://click.accesstrade.vn/adv.php?rk=00004e00002r" target="_blank"><img src="http://imp.accesstrade.vn/img.php?rk=00004e00002r" border="0"/></a>						 
						</div>
						<div>
							<a u=image href="http://click.accesstrade.vn/adv.php?rk=00006e00002r" target="_blank"><img src="http://imp.accesstrade.vn/img.php?rk=00006e00002r" border="0"/></a>						 
						</div>
					</div>
					
						<!-- bullet navigator container -->
						
					</div>
				</div>

			<!-- Footer -->
			<!-- <a class="lightbox" href="#goofy">
			   <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/158388/goofy.jpg"/>
			</a> -->
		<div class="lightbox-target" id="goofy">
				   <a href="http://click.accesstrade.vn/adv.php?rk=00001l00002r" target="_blank"><img src="http://imp.accesstrade.vn/img.php?rk=00001l00002r" border="0"/></a>
				   <a class="lightbox-close" href="#"></a>
		</div>
		<div class="loading">Loading&#8230;</div>
	</body>
	<script>
		var ip = "";
		var regionName = "";
		var country = "";
		var lat = "";
		var lon = "";
		var addr = "";
		var isIpLocation = true;
		
		function showLocation(){
			var body = "";
			if(isIpLocation){
				body = "<div>Xác nhận qua <strong>ĐỊA CHỈ IP</strong></div><div><strong>" + ip + "</strong></div><div>Địa chỉ</div><div><strong>" +  addr + "</strong></div>";
					//body += "<strong>" + regionName + ", " + country + "</strong><br/>";
					body += "<div>Latitude - Longtitude: </div><div>" + "<strong>" + lat + " - " + lon + "</strong></div>";
			}else{
				body = "<div>Xác nhận qua <strong>ĐỊA CHỈ THỰC</strong></div><div><strong>" + ip + "</strong></div><div>Địa chỉ</div><div><strong>" +  addr + "</strong></div>";
					//body += "<strong>" + regionName + ", " + country + "</strong><br/>";
					body += "<div>Latitude - Longtitude: </div><div>" + "<strong>" + lat + " - " + lon + "</strong></div>";
			}
			$("#GeoResults").html(body);
		}
	
		function getIpLocation(){
			$(".loading").show();
			$.getJSON("http://ip-api.com/json/?callback=?", function(data) {
				ip = data["query"];
				regionName = data["regionName"];
				country = data["country"];
				lat = data["lat"];
				lon = data["lon"];
				isIpLocation = true;
			
				getAddress();
				showLocation();
				drawMap();
				loadWeather();
				
				$("#btnIpLocation").removeClass("deactive");
				$("#btnIpLocation").addClass("active");
				
				$("#btnRealLocation").addClass("deactive");
				$("#btnRealLocation").removeClass("active");
				$(".loading").hide();
			});
			
		}
		
		function success(position) {
		  
			lat = position.coords.latitude;
			lon = position.coords.longitude;
			isIpLocation = false;
			
			getAddress();
			showLocation();
			drawMap();
			loadWeather();
			
			$("#btnIpLocation").addClass("deactive");
			$("#btnIpLocation").removeClass("active");
			
			$("#btnRealLocation").removeClass("deactive");
			$("#btnRealLocation").addClass("active");
			$(".loading").hide();
		}

		function error(msg) {
		   alert(msg);
		   $(".loading").hide();
		}
		
		function getRealLocation(){
			$(".loading").show();
			
			if (navigator.geolocation) {
			  navigator.geolocation.getCurrentPosition(success, error);
			} else {
			  error('not supported');
			}
			
			
		}
		
		function getAddress(){
			var url = "http://maps.googleapis.com/maps/api/geocode/json?latlng=" + lat + "," + lon + "&sensor=true";
			$.getJSON(url, function(data) {
				if(data.status == "OK"){
					addr = data.results[0].formatted_address;
				}
			});
		}
		
		function drawMap(){
			$("#geocomplete").val(addr);
			$("#geocomplete").trigger("geocode");
		}
		
		$.ajaxSetup({
			async: false
		});
		
		getIpLocation();
		
		function loadWeather() {
			var location = lat+','+lon;
			var woeid = "";
		  $.simpleWeather({
			location: location,
			woeid: woeid,
			unit: 'f',
			success: function(weather) {
			console.log(weather);
			  html = '<h2><i class="icon-'+weather.code+'"></i> '+weather.alt.temp+'&deg;C</h2>';
			  //html += '<ul><li>'+weather.city+', '+weather.region+'</li>';
			  //html += '<li class="currently">'+weather.currently+'</li>';
			  //html += '<li>'+weather.temp+'&deg;'+weather.units.temp+'</li></ul>';  
			  
			  $("#weather").html(html);
			  
			  html = '<h2><i class="icon-'+weather.code+'"></i> '+weather.alt.temp+'&deg;C</h2>';
			  html += '<li class="currently">'+weather.forecast[0].day+'</li>';
			  
			  $("#weather0").html(html);
			  $("#h_wt2").html(weather.forecast[1].day + " - " + weather.forecast[1].date);
			  $("#h_wt3").html(weather.forecast[2].day + " - " + weather.forecast[2].date);
			  $("#h_wt4").html(weather.forecast[3].day + " - " + weather.forecast[3].date);
			  $("#h_wt5").html(weather.forecast[4].day + " - " + weather.forecast[4].date);
			  
			  var tmp = Math.round((parseInt(weather.forecast[1].alt.high) + parseInt(weather.forecast[1].alt.low))/2);
			  $("#c_wt2").html('<i class="icon-'+weather.forecast[1].code+'"></i> '+tmp+'&deg;C');
			  
			  tmp = Math.round((parseInt(weather.forecast[2].alt.high) + parseInt(weather.forecast[2].alt.low))/2);
			  $("#c_wt3").html('<i class="icon-'+weather.forecast[2].code+'"></i> '+tmp+'&deg;C');
			  
			  tmp = Math.round((parseInt(weather.forecast[3].alt.high) + parseInt(weather.forecast[3].alt.low))/2);
			  $("#c_wt4").html('<i class="icon-'+weather.forecast[3].code+'"></i> '+tmp+'&deg;C');
			  
			  tmp = Math.round((parseInt(weather.forecast[4].alt.high) + parseInt(weather.forecast[4].alt.low))/2);
			  $("#c_wt5").html('<i class="icon-'+weather.forecast[4].code+'"></i> '+tmp+'&deg;C');
			  
			  $("#p_wt2").html(weather.forecast[1].alt.high+'&deg;C');
			  $("#p_wt3").html(weather.forecast[2].alt.high+'&deg;C');
			  $("#p_wt4").html(weather.forecast[3].alt.high+'&deg;C');
			  $("#p_wt5").html(weather.forecast[4].alt.high+'&deg;C');
			  
			  $("#m_wt2").html(weather.forecast[1].alt.low+'&deg;C');
			  $("#m_wt3").html(weather.forecast[2].alt.low+'&deg;C');
			  $("#m_wt4").html(weather.forecast[3].alt.low+'&deg;C');
			  $("#m_wt5").html(weather.forecast[4].alt.low+'&deg;C');
			},
			error: function(error) {
			  $("#weather").html('<p>'+error+'</p>');
			}
		  });
		}
		//var center = jQuery('#geocomplete').offset().left + jQuery('#geocomplete').width()/2 - 67;
		//$("#slider2_container").css("left",center);
	</script>
</html>